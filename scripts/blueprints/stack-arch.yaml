selector:
  sw.os: 1
  sw.stack: 1
  sw.stack-variant: 1
  arch.sw: 1
output:
  filename: Dockerfile
  imageName: "{{this.children.arch.sw.slug}}-{{this.children.sw.os.slug}}-{{this.children.sw.stack.slug}}"
  type: sw.docker-image.stack-arch.{{this.children.sw.stack.slug}}
  slug: "{{this.children.arch.sw.slug}}-{{this.children.sw.os.slug}}-{{this.children.sw.stack.slug}}:{{this.children.sw.stack.version}}-{{this.children.sw.os.version}}-{{this.children.sw.stack-variant.slug}}"
  path: "{{this.children.sw.stack.slug}}/{{this.children.arch.sw.slug}}/{{this.children.sw.os.slug}}/{{this.children.sw.os.version}}/{{this.children.sw.stack.version}}/{{this.children.sw.stack-variant.slug}}"
  requires:
    - type: hw.device-type
      arch: "{{this.children.arch.sw.slug}}"
  template:
    - name: stack-device
      data: >
        # AUTOGENERATED FILE

        FROM balenalib/{{this.arch.sw.slug}}-{{this.sw.os.slug}}:{{this.sw.os.version}}-{{this.sw.stack-variant.slug}}


        {{import partial=this.sw.stack-variant.slug combination="sw.stack+sw.os+hw.device-type"}}


        {{import partial="cmd" combination="sw.stack+sw.os+hw.device-type"}}


        {{#sw.stack.assets.test}}
        {{import partial="test" combination="sw.stack+sw.os+hw.device-type"}}
        {{/sw.stack.assets.test}}


        {{import partial="image-info" combination="sw.stack+sw.os+hw.device-type"}}
